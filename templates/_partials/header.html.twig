{# templates/_partials/header.html.twig #}
{% set events = evenementsEnCours|default([]) %}

<header id="lux-header">
  <div class="hero">
    <video src="{{ asset('video/intro.mp4') }}" autoplay muted loop playsinline></video>
    <div class="overlay"></div>

    <div class="top-bar">
      <a href="{{ path('app_accueil') }}" class="logo">Vestige d'Or</a>

      <div class="icons">
        <a href="{{ path('app_lot_index') }}" title="EnchÃ¨res" class="icon-btn">ğŸ”</a>
        <a href="{{ path('app_mes_favoris') }}" title="Favoris" class="icon-btn">â¤ï¸</a>

        {% if app.user %}
          <a href="{{ path('app_profil') }}" title="Mon Profil" class="icon-btn">ğŸ‘¤</a>
          <a href="{{ path('app_logout') }}" title="DÃ©connexion" class="icon-btn">ğŸšª</a>
        {% else %}
          <a href="{{ path('app_login') }}" title="Connexion" class="icon-btn">ğŸ‘¤</a>
          <a href="{{ path('app_register') }}" title="Inscription" class="icon-btn">â•</a>
        {% endif %}
      </div>
    </div>

<div class="carousel">
  {% if events|length %}
    {% for ev in events %}
      {# essaie de rÃ©cupÃ©rer l'image du premier lot de l'Ã©vÃ©nement #}
      {% set firstLot = ev.lots|default([])|first %}
      {% set imgPath = (firstLot and firstLot.imageFilename) 
          ? asset('uploads/' ~ firstLot.imageFilename) 
          : asset('images/demo/placeholder.jpg') %}

      <a href="{{ path('app_evenement_enchere_show', { id: ev.id }) }}" class="carousel-item">
        <img src="{{ imgPath }}" alt="{{ ev.titre }}">
        <span>{{ ev.titre }}</span>
      </a>
    {% endfor %}
  {% else %}
    {% for i in 1..4 %}
      <div class="carousel-item placeholder">
        <div></div>
        <span>BientÃ´t</span>
      </div>
    {% endfor %}
  {% endif %}
</div>

  </div>

  <nav id="nav-hidden">
    <ul>
      <li><a href="{{ path('app_accueil') }}">Accueil</a></li>
      <li class="dropdown">
        <span>CatÃ©gories â–¾</span>
        <div class="dropdown-content">
          <a href="{{ path('app_categorie_show', {slug: 'sieges-fauteuils'}) }}">SiÃ¨ges & Fauteuils</a>
          <a href="{{ path('app_categorie_show', {slug: 'tables-bureaux'}) }}">Tables & Bureaux</a>
          <a href="{{ path('app_categorie_show', {slug: 'armoires-commodes'}) }}">Armoires & Commodes</a>

          <a href="{{ path('app_categorie_show', {slug: 'peintures-anciennes'}) }}">Peintures anciennes</a>
          <a href="{{ path('app_categorie_show', {slug: 'gravures-dessins'}) }}">Gravures & Dessins</a>
          <a href="{{ path('app_categorie_show', {slug: 'affiches-anciennes'}) }}">Affiches anciennes</a>

          <a href="{{ path('app_categorie_show', {slug: 'bijoux-anciens'}) }}">Bijoux anciens</a>
          <a href="{{ path('app_categorie_show', {slug: 'montres-collection'}) }}">Montres de collection</a>
          <a href="{{ path('app_categorie_show', {slug: 'objets-precieux'}) }}">Objets prÃ©cieux</a>
          <a href="{{ path('app_categorie_show', {slug: 'monnaies-medailles'}) }}">Monnaies & MÃ©dailles</a>

          <a href="{{ path('app_categorie_show', {slug: 'objets-asiatiques'}) }}">Objets asiatiques</a>
          <a href="{{ path('app_categorie_show', {slug: 'objets-africains'}) }}">Objets africains</a>
          <a href="{{ path('app_categorie_show', {slug: 'objets-amerindiens'}) }}">Objets amÃ©rindiens</a>
        </div>
      </li>
      <li><a href="{{ path('app_lot_index') }}">EnchÃ¨res</a></li>
      <li><a href="{{ path('app_contact') }}">Contact</a></li>
    </ul>
  </nav>
</header>

<script>
  const nav = document.getElementById("nav-hidden");
  window.addEventListener("mousemove", (e) => {
    if (e.clientY < 60) nav.classList.add("show"); else nav.classList.remove("show");
  });
</script>
