<header id="lux-header">
  <div class="hero">
    <video src="{{ asset('video/intro.mp4') }}" autoplay muted loop playsinline></video>
    <div class="overlay"></div>

    <div class="top-bar">
      <a href="{{ path('app_accueil') }}" class="logo">Vestige d’Or</a>

      <div class="icons">
        <a href="{{ path('app_lot_index') }}" title="Rechercher" class="icon-btn">
          🔍
        </a>
        <a href="#" title="Favoris" class="icon-btn">❤️</a>

        {% if app.user %}
          <a href="{{ path('app_logout') }}" title="Déconnexion" class="icon-btn">🚪</a>
        {% else %}
          <a href="{{ path('app_login') }}" title="Connexion" class="icon-btn">👤</a>
          <a href="{{ path('app_register') }}" title="Inscription" class="icon-btn">➕</a>
        {% endif %}
      </div>
    </div>

    <div class="carousel">
      {% if evenementsEnCours is defined and evenementsEnCours|length %}
        {% for ev in evenementsEnCours %}
          <a href="{{ path('app_lot_index', { evenement: ev.id }) }}" class="carousel-item">
            <img src="{{ ev.imageHero ? asset('uploads/' ~ ev.imageHero) : asset('images/demo/placeholder.jpg') }}" alt="{{ ev.titre }}">
            <span>{{ ev.titre }}</span>
          </a>
        {% endfor %}
      {% else %}
        {% for i in 1..4 %}
          <div class="carousel-item placeholder">
            <div></div>
            <span>Bientôt</span>
          </div>
        {% endfor %}
      {% endif %}
    </div>
  </div>

  <nav id="nav-hidden">
    <ul>
      <li><a href="{{ path('app_accueil') }}">Accueil</a></li>
      <li class="dropdown">
        <span>Catégories ▾</span>
        <div class="dropdown-content">
          <a href="{{ path('app_lot_index', {cat:'Mobilier'}) }}">Mobilier</a>
          <a href="{{ path('app_lot_index', {cat:'Sieges'}) }}">Sièges & Fauteuils</a>
          <a href="{{ path('app_lot_index', {cat:'Tables'}) }}">Tables & Bureaux</a>
          <a href="{{ path('app_lot_index', {cat:'Armoires'}) }}">Armoires & Commodes</a>
          <a href="{{ path('app_lot_index', {cat:'Tableaux'}) }}">Tableaux & Arts graphiques</a>
          <a href="{{ path('app_lot_index', {cat:'Bijoux'}) }}">Bijoux & Montres</a>
          <a href="{{ path('app_lot_index', {cat:'ObjetsPrecieux'}) }}">Objets précieux</a>
          <a href="{{ path('app_lot_index', {cat:'Ethnique'}) }}">Art d’Orient & Ethnique</a>
        </div>
      </li>
      <li><a href="{{ path('app_lot_index') }}">Enchères</a></li>
      <li><a href="#contact">Contact</a></li>
    </ul>
  </nav>
</header>

<script>
  const nav = document.getElementById("nav-hidden");
  window.addEventListener("mousemove", e => {
    if (e.clientY < 50) {
      nav.classList.add("show");
    } else {
      nav.classList.remove("show");
    }
  });
</script>
