{% extends 'base.html.twig'%}

{% block title %}Vestige d’Or — Tous les lots{% endblock %}

{% block body %}
<main class="lots-page" style="background-color:#000; color:#fff; min-height:100vh; padding:2rem;">
  <h1 style="text-align:center; color:#d4af37; margin-bottom:2rem;">Nos Lots aux Enchères</h1>

  {% if lots is empty %}
    <p style="text-align:center;">Aucun lot disponible pour le moment.</p>
  {% else %}
    <div class="lot-grid" style="display:grid; grid-template-columns:repeat(auto-fit, minmax(280px, 1fr)); gap:2rem;">
      {% for lot in lots %}
        <div class="lot-card" style="background:#111; border:1px solid rgba(212,175,55,0.5); border-radius:10px; overflow:hidden; transition:transform 0.3s;">
          <a href="{{ path('app_lot_show', {id: lot.id}) }}" style="color:inherit; text-decoration:none;">
            {% if lot.imageFilename %}
              <img src="{{ asset('uploads/' ~ lot.imageFilename) }}" alt="{{ lot.titre }}" style="width:100%; height:220px; object-fit:cover;">
            {% else %}
              <img src="{{ asset('images/demo/commo.png') }}" alt="Aucune image" style="width:100%; height:220px; object-fit:cover; opacity:0.8;">
            {% endif %}

            <div style="padding:1rem;">
              <h3 style="color:#d4af37; margin-bottom:0.5rem;">{{ lot.titre }}</h3>
              <p style="font-size:0.9rem; color:#ccc; margin-bottom:0.5rem;">Catégorie : {{ lot.categorie|default('Non spécifiée') }}</p>
              <p style="font-weight:bold; color:#fff;">Prix actuel : {{ lot.prixActuel|number_format(2, ',', ' ') }} €</p>

              {% if lot.dateFin %}
                <p style="font-size:0.85rem; color:#aaa;">Fin de l’enchère : {{ lot.dateFin|date('d/m/Y H:i') }}</p>
              {% endif %}

              {% if lot.estVendu %}
                <p style="background:#b80000; color:white; padding:0.3rem 0.5rem; display:inline-block; border-radius:5px;">VENDU</p>
              {% endif %}
            </div>
          </a>
        </div>
      {% endfor %}
    </div>
  {% endif %}
</main>
{% endblock %}
