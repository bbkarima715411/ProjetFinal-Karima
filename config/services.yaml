parameters:
  upload_dir: '%kernel.project_dir%/public/uploads'

services:
  _defaults:
    autowire: true
    autoconfigure: true
    bind:
      $uploadDir: '%upload_dir%'

  App\:
    resource: '../src/'
    exclude:
      - '../src/DependencyInjection/'
      - '../src/Entity/'
      - '../src/Kernel.php'

  App\Controller\:
    resource: '../src/Controller/'
    tags: ['controller.service_arguments']

  # Configuration des contrôleurs avec injection de dépendances
  App\Controller\PaymentController:
    arguments:
      $paypalClientId: '%env(PAYPAL_CLIENT_ID)%'
      $paypalSecret: '%env(PAYPAL_SECRET)%'

  App\Controller\CheckoutController:
    arguments:
      $paypalClientId: '%env(PAYPAL_CLIENT_ID)%'
      $paypalSecret: '%env(PAYPAL_SECRET)%'
      $mailService: '@App\Service\MailService'

  # Configuration du service d'email
  App\Service\MailService:
    arguments:
      $senderEmail: 'noreply@votresite.com'
      $senderName: 'Votre Boutique'

  # Extension Twig personnalisée pour le formatage des devises
  App\Twig\AppExtension:
    tags: [twig.extension]
